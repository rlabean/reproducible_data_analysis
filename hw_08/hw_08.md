Homework 8
================
Robert LaBean

``` r
library(tidyverse)
```

    ## -- Attaching packages ------------------------------------------- tidyverse 1.3.0 --

    ## v ggplot2 3.3.2     v purrr   0.3.4
    ## v tibble  3.0.3     v dplyr   1.0.2
    ## v tidyr   1.1.2     v stringr 1.4.0
    ## v readr   1.4.0     v forcats 0.5.0

    ## Warning: package 'readr' was built under R version 4.0.3

    ## -- Conflicts ---------------------------------------------- tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(nycflights13)
library(babynames)
```

    ## Warning: package 'babynames' was built under R version 4.0.3

Creating and accessing lists.

``` r
mylist <- list(cars_df = mtcars, b_names_df = babynames, flights_df = flights)

glimpse(mylist$cars_df)
```

    ## Rows: 32
    ## Columns: 11
    ## $ mpg  <dbl> 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17...
    ## $ cyl  <dbl> 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4,...
    ## $ disp <dbl> 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8,...
    ## $ hp   <dbl> 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, ...
    ## $ drat <dbl> 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3....
    ## $ wt   <dbl> 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150,...
    ## $ qsec <dbl> 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00, 22.90,...
    ## $ vs   <dbl> 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,...
    ## $ am   <dbl> 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0,...
    ## $ gear <dbl> 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3,...
    ## $ carb <dbl> 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1,...

``` r
glimpse(mylist[2])
```

    ## List of 1
    ##  $ b_names_df: tibble [1,924,665 x 5] (S3: tbl_df/tbl/data.frame)
    ##   ..$ year: num [1:1924665] 1880 1880 1880 1880 1880 1880 1880 1880 1880 1880 ...
    ##   ..$ sex : chr [1:1924665] "F" "F" "F" "F" ...
    ##   ..$ name: chr [1:1924665] "Mary" "Anna" "Emma" "Elizabeth" ...
    ##   ..$ n   : int [1:1924665] 7065 2604 2003 1939 1746 1578 1472 1414 1320 1288 ...
    ##   ..$ prop: num [1:1924665] 0.0724 0.0267 0.0205 0.0199 0.0179 ...

``` r
glimpse(mylist[["flights_df"]])
```

    ## Rows: 336,776
    ## Columns: 19
    ## $ year           <int> 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013...
    ## $ month          <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
    ## $ day            <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
    ## $ dep_time       <int> 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 55...
    ## $ sched_dep_time <int> 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 60...
    ## $ dep_delay      <dbl> 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2,...
    ## $ arr_time       <int> 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 8...
    ## $ sched_arr_time <int> 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 8...
    ## $ arr_delay      <dbl> 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7,...
    ## $ carrier        <chr> "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV", "B6"...
    ## $ flight         <int> 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301...
    ## $ tailnum        <chr> "N14228", "N24211", "N619AA", "N804JB", "N668DN", "N...
    ## $ origin         <chr> "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR", "LG...
    ## $ dest           <chr> "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL", "IA...
    ## $ air_time       <dbl> 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149...
    ## $ distance       <dbl> 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 73...
    ## $ hour           <dbl> 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6...
    ## $ minute         <dbl> 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59...
    ## $ time_hour      <dttm> 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-0...

Access the mtcars dataframe.

``` r
glimpse(mtcars$mpg)
```

    ##  num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...

``` r
glimpse(mtcars[["mpg"]])
```

    ##  num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...

Adding “displacement per cylinder” column to mtcars.

``` r
# disp_cyl_mtcars <- mutate(mtcars, disp_cyl = mtcars$disp / mtcars$cyl)
# glimpse(disp_cyl_mtcars)

mtcars$disp_per_cyl = mtcars$disp / mtcars$cyl
glimpse(mtcars)
```

    ## Rows: 32
    ## Columns: 12
    ## $ mpg          <dbl> 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, ...
    ## $ cyl          <dbl> 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, ...
    ## $ disp         <dbl> 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7...
    ## $ hp           <dbl> 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 18...
    ## $ drat         <dbl> 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, ...
    ## $ wt           <dbl> 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190...
    ## $ qsec         <dbl> 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00...
    ## $ vs           <dbl> 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, ...
    ## $ am           <dbl> 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, ...
    ## $ gear         <dbl> 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, ...
    ## $ carb         <dbl> 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, ...
    ## $ disp_per_cyl <dbl> 26.66667, 26.66667, 27.00000, 43.00000, 45.00000, 37.5...

Working with factors.

``` r
num.vec <- c(8, 6, 7, 5, 3, 0, 9)

as.factor(num.vec)
```

    ## [1] 8 6 7 5 3 0 9
    ## Levels: 0 3 5 6 7 8 9

``` r
as.numeric(num.vec)
```

    ## [1] 8 6 7 5 3 0 9

Load the BLS 2019 National Salary Data for all occupations, and since
we’re only interested in geoscientist data we will filter them out.

``` r
# salary_data <- readxl::read_excel("data/salary_data.xlsx")
salary_data <- read_csv("data/salary_data.csv") %>%
  filter(occ_code == "19-2042")
```

    ## 
    ## -- Column specification ------------------------------------------------------------
    ## cols(
    ##   .default = col_character(),
    ##   area_type = col_double(),
    ##   own_code = col_double(),
    ##   pct_total = col_logical(),
    ##   annual = col_logical(),
    ##   hourly = col_logical()
    ## )
    ## i Use `spec()` for the full column specifications.

``` r
as.numeric(gsub(",", "", salary_data))
```

    ## Warning: NAs introduced by coercion

    ##  [1] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
    ## [26] NA NA NA NA NA

``` r
glimpse(salary_data)
```

    ## Rows: 50
    ## Columns: 30
    ## $ area         <chr> "01", "02", "04", "05", "06", "08", "09", "10", "12", ...
    ## $ area_title   <chr> "Alabama", "Alaska", "Arizona", "Arkansas", "Californi...
    ## $ area_type    <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, ...
    ## $ naics        <chr> "000000", "000000", "000000", "000000", "000000", "000...
    ## $ naics_title  <chr> "Cross-industry", "Cross-industry", "Cross-industry", ...
    ## $ i_group      <chr> "cross-industry", "cross-industry", "cross-industry", ...
    ## $ own_code     <dbl> 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, ...
    ## $ occ_code     <chr> "19-2042", "19-2042", "19-2042", "19-2042", "19-2042",...
    ## $ occ_title    <chr> "Geoscientists, Except Hydrologists and Geographers", ...
    ## $ o_group      <chr> "detailed", "detailed", "detailed", "detailed", "detai...
    ## $ tot_emp      <chr> "160", "460", "340", "120", "4,660", "1,910", "60", "9...
    ## $ emp_prse     <chr> "10.1", "11.8", "13.9", "20.7", "8.7", "13.3", "35.3",...
    ## $ jobs_1000    <chr> "0.080", "1.439", "0.117", "0.098", "0.268", "0.714", ...
    ## $ loc_quotient <chr> "0.40", "7.24", "0.59", "0.49", "1.35", "3.59", "0.19"...
    ## $ pct_total    <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
    ## $ h_mean       <chr> "31.36", "49.10", "37.29", "32.51", "46.53", "55.18", ...
    ## $ a_mean       <chr> "65,230", "102,130", "77,560", "67,630", "96,790", "11...
    ## $ mean_prse    <chr> "3.1", "2.4", "3.2", "14.9", "3.0", "6.8", "4.3", "7.4...
    ## $ h_pct10      <chr> "19.60", "28.41", "25.08", "16.60", "24.01", "25.66", ...
    ## $ h_pct25      <chr> "23.90", "35.01", "28.60", "19.89", "31.15", "33.52", ...
    ## $ h_median     <chr> "28.58", "46.32", "36.38", "28.48", "44.29", "46.44", ...
    ## $ h_pct75      <chr> "36.40", "60.52", "45.35", "37.63", "57.96", "69.58", ...
    ## $ h_pct90      <chr> "47.55", "76.19", "54.13", "58.79", "72.29", "97.28", ...
    ## $ a_pct10      <chr> "40,760", "59,090", "52,160", "34,530", "49,930", "53,...
    ## $ a_pct25      <chr> "49,720", "72,820", "59,500", "41,370", "64,780", "69,...
    ## $ a_median     <chr> "59,440", "96,340", "75,670", "59,240", "92,130", "96,...
    ## $ a_pct75      <chr> "75,700", "125,880", "94,330", "78,270", "120,560", "1...
    ## $ a_pct90      <chr> "98,900", "158,470", "112,580", "122,290", "150,360", ...
    ## $ annual       <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
    ## $ hourly       <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...

Since we want to compare the data state by state, we need to normalize
by a cost of living index.

``` r
col_index <- read.csv("data/col_index.csv", fileEncoding = "UTF-8-BOM")
norm_salary_data <- left_join(salary_data, col_index)
```

    ## Joining, by = "area_title"

``` r
glimpse(norm_salary_data)
```

    ## Rows: 50
    ## Columns: 31
    ## $ area         <chr> "01", "02", "04", "05", "06", "08", "09", "10", "12", ...
    ## $ area_title   <chr> "Alabama", "Alaska", "Arizona", "Arkansas", "Californi...
    ## $ area_type    <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, ...
    ## $ naics        <chr> "000000", "000000", "000000", "000000", "000000", "000...
    ## $ naics_title  <chr> "Cross-industry", "Cross-industry", "Cross-industry", ...
    ## $ i_group      <chr> "cross-industry", "cross-industry", "cross-industry", ...
    ## $ own_code     <dbl> 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, ...
    ## $ occ_code     <chr> "19-2042", "19-2042", "19-2042", "19-2042", "19-2042",...
    ## $ occ_title    <chr> "Geoscientists, Except Hydrologists and Geographers", ...
    ## $ o_group      <chr> "detailed", "detailed", "detailed", "detailed", "detai...
    ## $ tot_emp      <chr> "160", "460", "340", "120", "4,660", "1,910", "60", "9...
    ## $ emp_prse     <chr> "10.1", "11.8", "13.9", "20.7", "8.7", "13.3", "35.3",...
    ## $ jobs_1000    <chr> "0.080", "1.439", "0.117", "0.098", "0.268", "0.714", ...
    ## $ loc_quotient <chr> "0.40", "7.24", "0.59", "0.49", "1.35", "3.59", "0.19"...
    ## $ pct_total    <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
    ## $ h_mean       <chr> "31.36", "49.10", "37.29", "32.51", "46.53", "55.18", ...
    ## $ a_mean       <chr> "65,230", "102,130", "77,560", "67,630", "96,790", "11...
    ## $ mean_prse    <chr> "3.1", "2.4", "3.2", "14.9", "3.0", "6.8", "4.3", "7.4...
    ## $ h_pct10      <chr> "19.60", "28.41", "25.08", "16.60", "24.01", "25.66", ...
    ## $ h_pct25      <chr> "23.90", "35.01", "28.60", "19.89", "31.15", "33.52", ...
    ## $ h_median     <chr> "28.58", "46.32", "36.38", "28.48", "44.29", "46.44", ...
    ## $ h_pct75      <chr> "36.40", "60.52", "45.35", "37.63", "57.96", "69.58", ...
    ## $ h_pct90      <chr> "47.55", "76.19", "54.13", "58.79", "72.29", "97.28", ...
    ## $ a_pct10      <chr> "40,760", "59,090", "52,160", "34,530", "49,930", "53,...
    ## $ a_pct25      <chr> "49,720", "72,820", "59,500", "41,370", "64,780", "69,...
    ## $ a_median     <chr> "59,440", "96,340", "75,670", "59,240", "92,130", "96,...
    ## $ a_pct75      <chr> "75,700", "125,880", "94,330", "78,270", "120,560", "1...
    ## $ a_pct90      <chr> "98,900", "158,470", "112,580", "122,290", "150,360", ...
    ## $ annual       <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
    ## $ hourly       <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
    ## $ index        <dbl> 89.4, 128.0, 101.3, 87.8, 138.5, 105.0, 125.1, 107.9, ...
